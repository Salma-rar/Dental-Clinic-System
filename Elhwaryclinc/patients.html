<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ - Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù†</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <h1><i class="fas fa-user-injured"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰</h1>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
            <li><a class="active" href="patients.html"><i class="fas fa-user-injured"></i> Ø§Ù„Ù…Ø±Ø¶Ù‰</a></li>
            <li><a href="services.html"><i class="fas fa-teeth"></i> Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
            <li><a href="payments.html"><i class="fas fa-money-bill-wave"></i> Ø§Ù„Ø¯ÙØ¹</a></li>
            <li><a href="appointments.html"><i class="fas fa-calendar-alt"></i> Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</a></li>
        </ul>
    </nav>
    
    <main>
        <section class="form-section">
            <h2><i class="fas fa-user-plus"></i> ØªØ³Ø¬ÙŠÙ„ Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯</h2>
            <form id="patientForm">
                <div class="form-group">
                    <input type="text" id="pName" required placeholder=" ">
                    <label for="pName">Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</label>
                </div>
                
                <div class="form-group">
                    <input type="tel" id="pPhone" required placeholder=" ">
                    <label for="pPhone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                </div>
                
                <div class="form-group">
                    <input type="number" id="pAge" placeholder=" ">
                    <label for="pAge">Ø§Ù„Ø¹Ù…Ø±</label>
                </div>
                
 
                    <div class="form-group">
    <label for="pStatus">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±ÙŠØ¶</label>
    <select id="pStatus" required>
        <option value=""></option>
        <option value="Ø¹Ø§Ø¯ÙŠ">Ø¹Ø§Ø¯ÙŠ</option>
        <option value="Ø¬Ø±Ø§Ø­Ø©">Ø¬Ø±Ø§Ø­Ø©</option>
        <option value="Ù…ØªØ§Ø¨Ø¹Ø©">Ù…ØªØ§Ø¨Ø¹Ø©</option>
    </select>
</div>

                </div>
                
                <button type="submit"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                <div id="patientMessage" class="confirmation-message"></div>
            </form>
        </section>
        
        <section class="table-section">
            <h2><i class="fas fa-list-ul"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ <small>(${clinicData.patients.length} Ù…Ø±ÙŠØ¶)</small></h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                            <th>Ø§Ù„Ø¹Ù…Ø±</th>
                        
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                             <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        </tr>
                    </thead>
                    <tbody id="patientsTable"></tbody>
                </table>
            </div>
        </section>
    </main>

   <script src="app.js"></script>
<script>
    const patientForm = document.getElementById('patientForm');
    const patientsTable = document.getElementById('patientsTable');
    const patientMessage = document.getElementById('patientMessage');
let editIndex = null; 

    function displayPatients() {
        patientsTable.innerHTML = '';

        if (clinicData.patients.length === 0) {
            const row = document.createElement('tr');
            row.innerHTML = `<td colspan="6" class="no-data">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø±Ø¶Ù‰</td>`;
            patientsTable.appendChild(row);
            return;
        }

        clinicData.patients.forEach((patient, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${patient.name}</td>
                <td>${patient.phone}</td>
                <td>${patient.age || '-'}</td>
      
                 <td>${patient.status || '-'}</td> <!-- ğŸ†• Ø§Ù„Ø­Ø§Ù„Ø© -->
                <td class="actions">
                    
                    <button class="delete" data-id="${index}">
                        <i class="fas fa-trash"></i> Ø­Ø°Ù
                    </button>
                </td>
            `;
            patientsTable.appendChild(row);
        });

        // Ø­Ø°Ù Ù…Ø±ÙŠØ¶
        document.querySelectorAll('.delete').forEach(btn => {
            btn.addEventListener('click', (e) => {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø±ÙŠØ¶ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡')) {
                    const id = e.target.closest('button').getAttribute('data-id');
                    const patientName = clinicData.patients[id].name;

                    // Ø­Ø°Ù Ø§Ù„Ù…Ø±ÙŠØ¶
                    clinicData.patients.splice(id, 1);

                    // Ø­Ø°Ù Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡
                    clinicData.payments = clinicData.payments.filter(payment => payment.patient !== patientName);

                    saveData();
                    displayPatients();

                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯
                    if (typeof updatePaymentSummary === 'function') {
                        updatePaymentSummary();
                    }

                    showMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø±ÙŠØ¶ ÙˆØ¬Ù…ÙŠØ¹ Ù…Ø¯ÙÙˆØ¹Ø§ØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                }
            });
        });
    }

    // ØªØ³Ø¬ÙŠÙ„ Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯
   // ØªØ³Ø¬ÙŠÙ„ Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯
patientForm.addEventListener('submit', (e) => {
    e.preventDefault();

    const newPatient = {
        name: document.getElementById('pName').value,
        phone: document.getElementById('pPhone').value,
        age: document.getElementById('pAge').value,
        status: document.getElementById('pStatus').value
    };

    clinicData.patients.push(newPatient);
    saveData();
    patientForm.reset();
    displayPatients();
    showMessage('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶ Ø¨Ù†Ø¬Ø§Ø­', 'success');
});

    function showMessage(text, type) {
        patientMessage.textContent = text;
        patientMessage.className = `confirmation-message ${type}`;
        patientMessage.style.display = 'block';
        setTimeout(() => {
            patientMessage.style.display = 'none';
        }, 3000);
    }
patientForm.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const newPatient = {
        name: document.getElementById('pName').value,
        phone: document.getElementById('pPhone').value,
        age: document.getElementById('pAge').value,
        gender: document.querySelector('input[name="gender"]:checked').value
    };
    
    clinicData.patients.push(newPatient);
    saveData();
    patientForm.reset();
    displayPatients();
    
    // Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    localStorage.setItem('clinicData', JSON.stringify(clinicData));
});
    displayPatients();
</script>
